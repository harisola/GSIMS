<!--BEGIN PAGE LEVEL STYLES -->
<style>
   /***** BEGIN - Search Result Highlight CSS *****/
/*div#datepaginator1 {
    width: 100% !important;
    display: block !important;
    float: left;
}*/
.page-loading {
  z-index: 999999;
  position: absolute;
}
input.error {
  color:red;
}
.table-scrollable {
    overflow: visible !important;
}
textarea {
    resize: none;
}
.group .optgroup input[type="checkbox"] {
    display: none;
}
.portlet.light>.portlet-title {
    padding: 10px 0px 0 !important;
    min-height: 48px;
}
.red-bar{
      border:1px solid red !important;
      z-index: 0 !important;
      height: 26px !important;
      top: -10px !important;
   }
#tapSlider .green-color {
   background: #89c589 !important;
}
   .red-bar .noUi-tooltip {
    top: 34px !important;
    height: 19px !important;
   }
   .grey-color{
      background: none !important;
   }
   span.match{
   background-color:#f8dda9;
   border:1px solid #edd19b;
   margin:-1px;
   color:#390705;
   }
   .form-actions {
   text-align: center;
   padding: 25px 0 0 0;
   border-top: 1px solid #ccc;
   margin-top: 30px;
   }
   .portlet.light>.portlet-title {
   padding: 10px 20px 0;
   min-height: 48px;
   }
   .table > tbody > tr > td {
   vertical-align: middle;
   }
   .paddingLeft0 {
   padding-left:0 !important;  
   }
   /***** END - Search Result Highlight CSS *****/
   .mt-checkbox, .mt-radio {
   margin-bottom: 8px !important;
   }
   .theme-option .mt-checkbox {
   margin-right: 20px;
   }
   h4.bbottom {
   padding-bottom: 7px;
   border-bottom:1px solid #ccc;  
   }
   .dropdown-menuu {
   background: #fafafa;
   position: absolute;
   width: 270px;
   border: 1px solid #999;
   right: 0px;
   top: 33px;
   z-index: 999999;
   height: 220px;
   padding: 5px 16px;
   box-shadow: 1px 1px 4px #000;
   overflow-y: scroll;
   }
   .theme-panel>.theme-options4>.theme-option>select.form-control {
   width: 231px !important;
   }
   .theme-panel>.toggler4, .theme-panel>.toggler4-close {
   padding: 17px !important;
   -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
   -ms-border-radius: 4px;
   -o-border-radius: 4px;
   top: 37px !important;
   cursor: pointer;
   }
   .theme-panel>.theme-options4 {
   top: 69px !important;
   }
   .commentType {
   right: 164px;
   position: absolute;
   }
   .inputs {
   position:relative;  
   }
   .pull-left.commentButton {
   position: absolute;
   right: 0px;
   width: 164px;
   }
   .border0 {
   border: 0 none; 
   }
   .rightpullAbsolutes {
   float: right;
   margin-top: -34px;  
   }
   .width100 {
   width:100%; 
   }
   .width78 {
   width: 93%;
   padding-right: 185px;   
   }
   .portlet-body .nav-tabs>li>a {
   padding: 10px 12px !important;
   }
   .dropdown-menu-right, .dropdown-menu.pull-right {
   left: auto;
   right: 0px;
   top: 24px;
   }
   .chat-form {
   margin-top: 15px;
   padding: 10px;
   background-color: #e9eff3;
   overflow: visible;
   clear: both;
   float: left;
   width: 100%;
   margin-bottom: 20px;
   }
   .md-radio {
   position: relative;
   margin: 11px 9px;
   }
   .md-radio label>span.inc {
   display:none;   
   }
   .theme-panel>.toggler4, .theme-panel>.toggler4-close {
   padding: 16px !important;
   -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
   -ms-border-radius: 4px;
   -o-border-radius: 4px;
   top: 4px;
   cursor: pointer;
   }
   .theme-panel>.toggler4, .theme-panel>.toggler4-close {
   padding: 16px !important;
   -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
   -ms-border-radius: 4px;
   -o-border-radius: 4px;
   top: 4px;
   cursor: pointer;
   }
   .theme-panel>.toggler4 {
   right: 0;
   position: absolute;
   background: url(./img/icon-color-filter.png) center no-repeat #536881 !important;
   border-radius: 4px;
   }
/*   ul.pagination {
   width:101%; 
   }*/
   .irs-disabled {
   opacity:1 !important;
   }
   .approvedBorder {
   border-left:3px solid green; 
   }
   .NoapprovedBorder {
   border-left:3px solid red;
   }
   .PendingapprovedBorder {
   border-left: 3px solid #BFCAD1;  
   }
   .bootstrap-switch-on > #approvedformShow {
   display: block !important;   
   }
   .headRightDetailsInner {
   background: #dedede;
   width: 100%;
   padding: 5px 15px;
   border-bottom: 1px solid #eef1f5;
   z-index: 999;
   margin-top: 0px;
   }
   .modal-body .portlet-body {
   padding-top:15px !important;
   }
   .irs-shadow {
   height: 12px !important;
   top: 25px !important;
   background: #27af64 !important;
   opacity: 1 !important;
   }
   .abridgedPersonalName,
   .abridgedPrimaryName {
   float: right;
   width: 57%;
   margin-top: -7px;
   }
   .noUi-handle .noUi-tooltip {
   left: -10px !important;
   }
/*   .noUi-connect.c-1-color {
   background: green;
   }
   .noUi-connect.c-3-color {
   background: green;
   }
   .noUi-connect.c-2-color {
   background: red;
   }*/

   .red-bar{
      border:1px solid red !important;
      z-index: 2 !important;
   }
   .grey-color{
      background: none !important;
   }
   .select2-container--bootstrap .select2-selection--multiple .select2-selection__choice {
      font-family: 'Conv_calibri';
   }

   #bufferTime .noUi-handle {
    border: 0 none;
    background: none;
}

   .red-color{
      background: red !important;
   }
.opardiv {
    background: #ff000003;
    width: 97%;
    height: 400px;
    position: absolute;
    z-index: 9;
}
.table-scrollable .dataTable td>.btn-group, .table-scrollable .dataTable th>.btn-group {
   position: relative !important;
}
.child ul li .dtr-title {
   color: #949393;
    width: 70px;
    float: left;
}
.table-scrollable {
    width: 100%;
    overflow-x: hidden;
    overflow-y: hidden;
    border: 1px solid #e7ecf1;
    margin: 10px 0!important;
}
.child ul li {
   width: 50%;
   float: left;
}
.child ul {
    list-style: none;
    margin-left: 0 !important;
    padding-left: 0;
}
.dataTables_length,
.dataTables_filter {
/*   display: none !important; */
margin-top: -7px !important;
}
.page-content-white .theme-panel {
  margin-top: 0px !important;
}
#StaffList_length {
  display: none !important;
}
#StaffList_filter label {
  width: 100%;
}
#StaffList_filter label input {
  width: 100% !important;
      padding: 15px 50px 15px 10px !important
}
.itemSq {
   background: #f9f9f9;
   border:1px solid #ccc;
   color: #888;
   padding: 2px 5px;
   float: left;
   margin-right: 5px;
   margin-bottom: 5px;
}
tr.online {
    border-left: 4px solid #25abde;
}
tr.walkin {
    border-left: 4px solid #dea525;
}
table tr td {
   font-size: 12px !important;
}
#IssueApplicationForm ul.multiselect-container.dropdown-menu {
  left: -48px !important;
}
#IssueApplicationForm .multiselect-native-select .btn-group,
#IssueApplicationForm .multiselect-native-select .btn-group .btn {
    width: 100% !important;
}
.processPresence {
      height: 120px;
}
.processSkipped {
      height: 50px;
}
.processSkipped .centerPosition,
.processPresence .centerPosition {
    margin: 1% auto;
    width: 100%;
    position: absolute;
    text-align: center;
    height: 12%;
    font-size: 20px;
    color: #666;
}
#IssueApplicationForm {
   display: none;
    float: left;
    width: 100%;
    background: #f7f7f7;
    padding: 10px;
    border: 1px solid #d8d8d8;
    margin-bottom: 20px;
    margin-top: -19px;
}
.portlet-input {
    float: left;
    width: 100%;
}
.form-control {
   font-size: 12px !important;
}
.marginTop10 {
   margin-top: 10px;
}
span.boxidentification {
    width: 10px;
    height: 11px;
    /* background: #ccc; */
    float: left;
    margin: 2px 5px 0 0;
    border: 1px solid #888;
}
/**************************************************************************************** */
.FormScreeningArea {
   background: #fbfbfb;
   border-left: 5px solid #104577;
   border-bottom: 1px solid #888;
}
.FormScreening {
   background: #104577;
}
.InitialInterviewArea {
   background: #fbfbfb;
   border-left: 5px solid #7cb5d2;
   border-bottom: 1px solid #888;
}
.InitialInterview {
   background: #7cb5d2;
}
.ObservationArea {
   background: #fbfbfb;
   border-left: 5px solid #97ceb7;
   border-bottom: 1px solid #888;
}
.Observation {
   background: #97ceb7;
}
.FormalInterviewArea {
   background: #fbfbfb;
   border-left: 5px solid #18a68c;
   border-bottom: 1px solid #888;
}
.FormalInterview {
   background: #18a68c;
}
.FinalConsultationArea {
   background: #fbfbfb;
   border-left: 5px solid #f8e0c8;
   border-bottom: 1px solid #888;
}
.FinalConsultation {
   background: #f8e0c8;
}
.offerPrep {
  border-bottom: 5px solid #f68e51 !important;
}
.offerProc {
  border-bottom: 5px solid #fcdf5d !important;
}
.compltCheck {
  border-bottom: 5px solid #bcd74a !important;
}
/***********************************************************************************************************/
h5.text-center {
    color: #888;
}
.relative {
   position: relative;
}
.overlayTOP {
    background: #e6fcff;
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 9999;
    opacity: 0.8;
}
.centerPosition {
    margin: 11% auto;
    width: 100%;
    position: absolute;
    text-align: center;
    height: 12%;
    font-size: 20px;
    color: #fff;
}
.multiselect-field {
   background: #fff !important;
}
li.statement {
    background: #fff8f8;
    border: 1px solid #e0e0e0;
    text-align: center;
    margin-top: 16px;
}
ul.multiselect-container.dropdown-menu {
    width: 287px;
    left: -147px;
    text-transform: none !important;
    top: 24px;
    overflow: hidden;
    max-height: 245px;
    overflow-y: scroll;
}
button.multiselect.dropdown-toggle.btn.btn-default {
    width: 140px;
    overflow: hidden;
    text-align: left;
}
</style>
<script src='https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.22/webcomponents.js'></script>
<link rel="import" href="https://rawgit.com/sitepoint-editors/multiselect-web-component/master/src/multiselect.html">
<link href="<?php echo e(URL::to('/metronic/global/plugins/ion.rangeslider/css/ion.rangeSlider.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/ion.rangeslider/css/ion.rangeSlider.skinFlat.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/bootstrap-markdown/css/bootstrap-markdown.min.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/bootstrap-summernote/summernote.css')); ?>" rel="stylesheet" type="text/css" />
<!-- -->
<link href="<?php echo e(URL::to('/css/studentLayout.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/bootstrap-datepaginator/bootstrap-datepaginator.min.css')); ?>" rel="stylesheet" type="text/css" />
<!-- -->
<link href="<?php echo e(URL::to('/metronic/global/plugins/time-range/css/flatpickr.min.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/time-range/css/nouislider.min.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/select2/css/select2.min.css')); ?>" rel="stylesheet" type="text/css" />
<link href="<?php echo e(URL::to('/metronic/global/plugins/select2/css/select2-bootstrap.min.css')); ?>" rel="stylesheet" type="text/css" />

<!-- END PAGE LEVEL STYLES -->

<div class="page-bar">
   <ul class="page-breadcrumb">
      <li>
         <a href="index.html">Home</a>
         <i class="fa fa-circle"></i>
      </li>
      <li>
         <span>HR Recruitment Followup</span>
      </li>
   </ul>
   <!-- page-breadcrumb -->
</div>

<div class="row marginTop20">
  <div class="col-md-4 borderRightDashed">
    <!-- BEGIN EXAMPLE TABLE PORTLET-->
    <div class="portlet light bordered fixed-height-NoScroll marginBottom0">
       <div class="portlet-title padding0">
          <div class="caption caption-md">
             <h3 id="staffView_StaffList_Total" class="marginTop0 marginBottom0 padding0">Applicant</h3>
          </div>
       </div>

       <!-- portlet-title -->
       <div class="portlet-body">
          <div class="inputs">
             <div class="theme-panel hidden-xs hidden-sm"  style="/*right:33px;*/right:0px;margin-top: 0px !important;">
                <div class="toggler"> </div>
                <div class="toggler-close"> </div>
                <div class="theme-options">
                   <div class="theme-option">
                      <span> Source </span> 
            <input type="hidden" value="0" id="after_modified_date" />
                      <select data-attribute="source" multiple="multiple" id="StaffView_Filter_Profile" class="ddlFilterTableRow page-header-option form-control input-sm multiselect">
              <option>Online</option>
                        <option>Walkin</option>
                      </select>
                   </div>
                   <div class="theme-option">
                      <span>Followup for</span> 
                      <select data-attribute="Standing" multiple="multiple" id="StaffView_Filter_Department" class="ddlFilterTableRow page-header-option form-control input-sm multiselect">
                        <option >Part B</option>
                        <option >Initial Interview</option>
              <option>Formal Interview</option>
              <option>Observation</option>
              <option>Final COnsultation</option>
              <option>Offer Procedure</option>
              <option>Complete Checklist</option>
                      </select>
                   </div>
                   <div class="theme-option">
                      <span> Position </span>
                      <select data-attribute="position" multiple="multiple" id="StaffView_Filter_Position" class="ddlFilterTableRow layout-option form-control input-sm multiselect">
                        <option>Technical</option>
               <option>Admin</option>
                        <option>Management</option>
                        <option>Teaching</option>
                      </select>
                   </div>
                   <div class="theme-option">
                      <span> Campus </span>
                      <select  data-attribute="campus" multiple="multiple" id="StaffView_Filter_Campus" class="ddlFilterTableRow page-header-option form-control input-sm multiselect">
                         <option value="South">South</option>
                         <option value="North">North</option>
                      </select>
                   </div>
          
                   <div class="theme-option text-center" id="staffView_filter_btn">
                      <a href="javascript:;" class="btn uppercase green-jungle applyFilter">Apply Filter</a>
                      <a href="javascript:;" class="btn uppercase grey-salsa clearFilter_Applicant">Clear Filter</a>
                   </div>
                </div>
                <!-- theme-options -->
             </div>
             <!-- theme-panel -->
             <?php /* <div class="theme-panel hidden-xs hidden-sm" style="margin-top: 0px !important;">
                <div class="toggler2"> </div>
                <div class="toggler2-close"> </div>
                <div class="theme-options2">
                   <div class="theme-option">
                      <span> By Name </span>
                      <select id="StaffView_Sort_Name" class="layout-option form-control input-sm">
                         <option value="A to Z">Ascending order (A to Z)</option>
                         <option value="Z to A">Descending order (Z to A)</option>
                      </select>
                   </div>
                   <div class="theme-option">
                      <span> By Department Name </span>
                      <select id="StaffView_Sort_Department" class="layout-option form-control input-sm">
                         <option value="A to Z">Ascending order (A to Z)</option>
                         <option value="Z to A">Descending order (Z to A)</option>
                      </select>
                   </div>
                   <div class="theme-option">
                      <span> By Attendance Score</span>
                      <select id="StaffView_Sort_AtdScore" class="page-header-option form-control input-sm">
                         <option value="H to L">High to Low</option>
                         <option value="L to H">Low to High</option>
                      </select>
                   </div>
                   <div class="theme-option text-center" id="staffView_sort_btn">
                      <a href="javascript:;" class="btn uppercase green-jungle applySort">Apply Sorters</a>
                      <a href="javascript:;" class="btn uppercase grey-salsa clearSort">Clear Sorters</a>
                   </div>
                </div>
                <!-- theme-options -->
             </div> */?>
             <!-- updated sorter -->
            <input type="hidden" id="Applicant_id" value="0" />
          </div>
          <!-- inputs -->
          <div class="table-scrollable table-scrollable-borderless" id="table_data">
      
          <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="StaffList">
                 <thead>
                     <tr>
                         <th class="all">Form #</th>
                         <th class="all">Name</th>
                         <th class="all">Position</th>
                         <th class="none">Mobile: </th>
                         <th class="none">Landline: </th>
                         <th class="none">CNIC: </th>
                         <th class="none">Standing: </th>
                         <th class="none">Apply Date:</th>
                         <th class="none">Source: </th>
                         <th class="none">Comments: </th>
                         
                     </tr>
                 </thead>
                 <tbody>
         <?php if( !empty( $staffRecruiment   ) ) : ?>
          <?php foreach($staffRecruiment as $sr ) : ?>
          
           <tr onclick="getLogs(<?php echo e($sr['career_id']); ?>,   &#39;<?php echo e(ucfirst($sr['name'])); ?>&#39; , <?php echo e($sr['status_id']); ?>)" class="<?= ( $sr["form_source"] == 1 ? 'online' : 'walkin') ;?> Row" data-source="<?= ( $sr["form_source"] == 1 ? 'Online' : 'Walkin') ;?>" data-position="<?=$sr["position_applied"];?>" data-standing="<?=$sr["status_name"]?>" data-campus="<?=$sr["Campus"];?>" data-id="<?=$sr["career_id"];?>" >
                         <td><a data-id="<?=$sr["career_id"];?>" ><?=$sr["gc_id"];?></a></td>
                         <td id="table_append_<?=$sr["career_id"];?>"><span  data-container="body" data-placement="top" data-original-title="<?=$sr["status_name"]?>" class="tooltips boxidentification <?=str_replace(' ', '', $sr["status_name"]);?>">&nbsp;</span><?=ucfirst($sr["name"]);?>
                         <?php /***** ***** ***** Part B ***** ***** *****/ ?>
                       
      
                            <br>
                            <small style="color: #888;">Followup <?=$sr["status_name"]?></small><br />
                    
                         
                         </td>

                         <td>
             <?php 
              $str = explode(",", $sr["position_applied"]);
              if( sizeof( $str > 0 ) )
              { 
              foreach($str as $s ): ?>
              <span class="itemSq"><?=$s;?></span>    
              
              <?php endforeach;
               } else{ ?>
                 
                 <span class="itemSq"><?=$sr["position_applied"];?></span>  
              <?php }
               ?>
             
             
             
             </td>
                         <td><?=$sr["mobile_phone"];?></td>
                         <td><?=$sr["land_line"];?></td> 
                         <td><?=$sr["nic"];?></td>
                         <td><?=$sr["status_name"]?></td>

                         <td><?php echo date("d-M-Y", strtotime( $sr["created"])); ?> - <?php echo date("h:i A", strtotime($sr["created"])); ?> <br />
              Modified date: <?php  echo($sr["log_created"] );   ?> </td>
              
                         <td><?= ( $sr["form_source"] == 1 ? 'Online' : 'Walkin') ;?></td>
                         <td><?=$sr["comments"];?></td>

                     </tr>
          <?php endforeach; ?>
         <?php endif;?>
         <?php /* ?>
                     <tr class="online selected Row">
                         <td><a>18-03/0117</a></td>
                         <td>Saleem Ahmed Qureshi<br /><small style="color: #888;">Call for Part B</small><br /><small style="color: #888;">Expected for Part B on <strong style="color:#000;">22 March 2018</strong> at <strong style="color:#000;">02:00 PM</strong></small></td>
                         <td><span class="itemSq">Admin</span> <span class="itemSq">Management</span> </td>
                         <td>+92-332-253-6406</td>
                         <td>61</td>
                         <td></td>
                         <td>Initial Interview</td>
                         <td>20-Mar-2018 - 12:29 AM</td>
                         <td>Online</td>
                         <td>Lorem Ipsum dolor sit amet</td>
                         <td>
                             <div class="btn-group pull-right">
                                 <button class="btn green btn-xs btn-outline dropdown-toggle" data-toggle="dropdown">Action
                                     <i class="fa fa-angle-down"></i>
                                 </button>
                                 <ul class="dropdown-menu pull-right">
                                     <li>
                                         <a href="javascript:;">
                                             <i class="fa fa-print"></i> Print </a>
                                     </li>
                                     <li>
                                         <a href="#PartB" data-toggle="modal">
                                             <i class="fa fa-phone"></i> Call for Part B </a>
                                     </li>
                                     <li>
                                         <a href="" data-toggle="modal">
                                             <i class="fa fa-user"></i> Part B Presence </a>
                                     </li>
                                 </ul><!-- dropdown-menu -->
                             </div>
                         </td>
                     </tr> 
          <?php */ ?>
         </tbody>
             </table>
          </div><!-- table_data -->
      

          <!-- table-scrollable-borderless -->
       </div>
       <!-- portlet-body -->
    </div><!-- portlet -->
  </div><!-- col-md-4 -->
  <div class="col-md-8 logsArea" style="display: none;">
    <div class="col-md-12 col-sm-12">
            <!-- BEGIN PORTLET-->
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption">
                      <i style="color:#888 !important;" class="icon-user font-dark"></i>
                      <span class="caption-subject font-dark bold uppercase "><span class="applicant_name_write" style="color: #888;">Fareeha Abbasi</span> - <span class="small">Awaiting to be Followed up</span>
                    </span>
                </div>
                    <div class="actions">
                        <div class="portlet-input input-inline">
                            <div class="input-icon right">
                                <i class="icon-magnifier"></i>
                                <input type="text" class="form-control input-circle" placeholder="search..."> </div>
                        </div>
                    </div>
                </div><!-- portlet-title -->
                <div class="portlet-body" id="chats">
                    <div class="scroller" style="height: 525px;" data-always-visible="1" data-rail-visible1="1">
                        <div class="showLogs">
                        </div>
                        <div class="chat-form">
                        <div class="row">
                          
                          <input type="hidden" name="followupStatusID" id="followupStatusID">
                          <input type="hidden" name="followupForm_id" id="followupForm_id">
                          <div class="col-md-4">
                            <select onchange="showDateTime()" class="form-control" id="followupType">
                              <option value="No Response">No Response</option>
                              <option value="Not Interested">Not Interested</option>
                              <option value="Extension">Extension</option>
                            </select>
                          </div><!-- -->
                          <div class="dateTimeDiv" style="display: none;">
                              <div class="col-md-4">
                                <input id="followupDate" type="date" class="form-control">
                              </div><!-- -->
                              <div class="col-md-4">
                                <input id="followupTime" type="time" class="form-control">
                              </div><!-- -->
                          </div>
                        </div><!-- row -->
                        <div class="row marginTop20">
                          <div class="col-md-12">
                            <textarea id="followupComments" name="followupComments" class="form-control" placeholder="Comments..."></textarea>
                          </div><!-- -->
                        </div><!-- col-md-12 -->
                        <div class="row marginTop20">
                          <div class="col-md-12">

                            <div id="followupCommentsErrorDivs" style="display: none;">
                                    <p>Fill the comment </p>
                                  </div> 

                            <input onclick="saveComments()" type="button" class="btn btn-group green-jungle" value="Submit">
                          </div><!-- -->
                        </div><!-- col-md-12 -->
                    </div>
                    </div>
                    
                </div>
            </div><!-- END PORTLET-->
        </div><!-- col-md-12 -->
  </div><!-- col-md-8 -->
</div>
  

</div><!-- row -->
<script>

  var saveComments = function saveComments(){
    var followupType = $('#followupType').val(); 
    var comments = $('#followupComments').val(); 
    var form_id =  $('#followupForm_id').val();
    var status_id =  $('#followupStatusID').val(); 
    var date =  $('#followupDate').val();
    var time =  $('#followupTime').val();

 App.startPageLoading();

  if(comments == ""){
$('#followupCommentsErrorDivs').show();
}
else{
  $('#followupCommentsErrorDivs').hide();
  
    //insert comments
    $.ajax({
        type:'POST',
        data:{
          '_token': '<?php echo e(csrf_token()); ?>',
          'followupType' : followupType,
          'comments' : comments,
          'form_id' : form_id,
          'status_id' : status_id,
          'date' : date,
          'time' : time
        },
        url:"<?php echo e(url('/addFollowComments')); ?>",
        dataType: "json",
        success: function(response){

          var name = $('.applicant_name_write').text()
          getLogs(form_id, name, status_id)
          $('#followupDate').val('');
          $('#followupTime').val('');
          $('#followupComments').val(''); 
        }, error : function(err){

      }
    });
  }
setTimeout(function(){
            App.stopPageLoading();
          }, 1000);
}


  var showDateTime = function showDateTime(){
    var followup = $('#followupType').val(); 
    if(followup == "Extension"){
      $('.dateTimeDiv').show();

    } else {
       $('.dateTimeDiv').hide();
    }
  }
    /*
    * Function Name : multiFilter
    * Description:  Multiple select checkbox filter function used to filter data on table using multiple values from one or more select checkboxes
    */    
    var multiFilter = function multiFilter(){

    var ddlFilterTableRow = $('select.ddlFilterTableRow');

   
    ddlFilterTableRow.attr('disabled', 'disabled');
  
  $("#StaffList").DataTable().destroy();
  
  var records = $('#StaffList').find('.Row');
  records.hide();
   
       var critriaAttributes = [];
       ddlFilterTableRow.each(function() {
           var $this = $(this),
               $selectedLength = $this.find(':selected').length,
               $critriaAttribute = '';
   
           if ($selectedLength > 0 && $this.val() != '0') {
               if ($selectedLength == 1) {
                   $critriaAttribute += '[data-' + $this.data('attribute') + '*="' + $this.val() + '"]';
               } else {
                   var $startDataAttribute = '[data-' + $this.data('attribute') + '*="',
                       $endDataAttribute = '"]',
                       $selectedValues = $this.val().toString();
             

   
                   $critriaAttribute += $startDataAttribute + $selectedValues.replace(',', ($endDataAttribute + ',' + $startDataAttribute)) + $endDataAttribute;
         
               }
               critriaAttributes.push($critriaAttribute);
           }
       });
                   
   
       var $showRecords = records;
       if (critriaAttributes.length > 0) {
           $.each(critriaAttributes, function(i, filterValue) {
               $showRecords = $showRecords.filter(filterValue);
           });
       }
   
       tableRecords = $showRecords.show();
   
    ddlFilterTableRow.removeAttr('disabled');
  
     
$("#StaffList").dataTable({
      
    
      "language": {
    "aria": {
      "sortAscending": ": activate to sort column ascending",
      "sortDescending": ": activate to sort column descending"
    },
    "emptyTable": "No data available in table",
    //"info": "Showing _START_ to _END_ of _TOTAL_ records",
    //"infoEmpty": "No records found",
    //"infoFiltered": "(filtered1 from _MAX_ total records)",
    "lengthMenu": "Show _MENU_",
    "search": "",
    "searchPlaceholder": "Search records..",
    "zeroRecords": "No matching records found",
    "paginate": {
      "previous":"Prev",
      "next": "Next",
      "last": "Last",
      "first": "First"
    }
  },


  "pagingType": "bootstrap_extended",
  "order": [[ 0, "desc" ]],
  "lengthMenu": [
    [-1, 40, 60, -1],
    [-1, 40, 60, "All"] // change per page values here
  ],

  "columnDefs": [{
    //"searchable": false,
    //"targets": [0]
  }],
  
  
    });
  
  
  var totalRow =  $('#StaffList tr:visible').length - 1;
    $('#staffView_StaffList_Total').text('Applicants - ' + totalRow); 
  
    }  
  $('#StaffView_Filter_Profile').multiselect("deselectAll", false).multiselect("refresh");
  $('#StaffView_Filter_Department').multiselect("deselectAll", false).multiselect("refresh");
  $('#StaffView_Filter_Position').multiselect("deselectAll", false).multiselect("refresh");
  $('#StaffView_Filter_AtdStd').multiselect("deselectAll", false).multiselect("refresh");
    $('#StaffView_Filter_Campus').multiselect("deselectAll", false).multiselect("refresh");

$('#staffView_filter_btn .applyFilter').click(function() {
  
   //Remove mark

   multiFilter();

   $('.toggler').show();
   $('.toggler-close').hide();
   $('.theme-panel > .theme-options').hide();
   $('#staffView_StaffList_Search').val('');

   $('.toggler2').show();
   $('.toggler2-close').hide();
   $('.theme-panel > .theme-options2').hide();
   $('#staffView_StaffList_Search').val('');

   var totalRow =  $('#staffView_Table_StaffList tr:visible').length - 1;
   $('#staffView_StaffList_Total').text('STAFF LIST - ' + totalRow);
});



$(document).on('click','#clear_data',function(){
  $('#career_name').val('');
  $('#career_nic').val('');
  $('#career_mobile').val('');
  $('#career_landline').val('');
  $('#career_gender').val('');
  $('#career_tag').val('');
  $('#career_comments').val('');

  $('#career_name').focus();
});




$(document).on('click','.career_gc_id',function(){


  /*
  var name = $('#career_name').val();
  var nic = $('#career_nic').val();
  var mobile = $('#career_mobile').val();
  var landline = $('#career_landline').val();
  var gender = $('#career_gender').val();
  var tag = $('#career_tag').val();
  var comments = $('#career_comments').val();
  var form_id = $('.walkin')
  */
  /***** Calling PDF *****/
  /*
  $.ajax({
      type: "GET",
      url: "http://10.10.10.63/gs/index.php/hcm/career_form_ajax/get_career_form_pdf",
      data: {
          name:name,
          nic:nic,
          mobile_phone:mobile,
          land_line:landline,
          gender:gender,
          tag:tag,
          comments:comments
      },
      success: function(data){
      },
      error: function() {

      }
  });
  */


});

$(document).on('click','#print_submit',function(){
  var name = $('#career_name').val();
  var nic = $('#career_nic').val();
  var mobile = $('#career_mobile').val();
  var landline = $('#career_landline').val();
  var gender = $('#career_gender').val();
  var tag = $('#career_tag').val();
  var comments = $('#career_comments').val();

  var errors = "";

  if(name === ""){ errors += "<strong>Name</strong> is required." }
  if(nic === ""){ if(errors !== "") { errors += "<br>"; } errors += "<strong>NIC</strong> is required." }
  if(mobile === ""){ if(errors !== "") { errors += "<br>"; } errors += "<strong>Mobile Phone</strong> is required." }
  if(gender === ""){ if(errors !== "") { errors += "<br>"; } errors += "<strong>Gender</strong> is required." }
  if(tag === "" || tag === null){ if(errors !== "") { errors += "<br>"; } errors += "<strong>Tag</strong> is required." }

  if(errors === ""){
    $('#error_div').hide();
    $.ajax({
      type:"POST",
      cache:false,
      data:{'_token': '<?php echo e(csrf_token()); ?>',
          name:name,
          nic:nic,
          mobile_phone:mobile,
          land_line:landline,
          gender:gender,
          tag:tag,
          comments:comments
        },
      url:"<?php echo e(url('/staff_recruitment_initiation_addcareerform')); ?>",
      success:function(e){
        if(e.substring(0,5) === "error"){
          $('#error_div').show();
          $('#error_div').html(e.substring(5, e.length));          
        }else{
          $('#error_div').hide();
          $('#career_name').val('');
          $('#career_nic').val('');
          $('#career_mobile').val('');
          $('#career_landline').val('');
          $('#career_gender').val('');
          $('#career_tag').val('');
          $('#career_comments').val('');
          $('#career_name').focus();


          /***** Calling PDF *****/
          var URL = "http://10.10.10.63/gs/index.php/hcm/career_form_ajax/get_career_form_pdf_gcid?gc_id="+e;
          window.open(URL, '_blank');
          //window.location.href = URL;
          //console.log(URL);



          /***** Refresh Data *****/
      
      
      $.ajax({
        type:'POST',
        data:{'_token': '<?php echo e(csrf_token()); ?>'},
        url:"<?php echo e(url('/addcustomer')); ?>",
        dataType: "json",
        async: false,
        cache: false,
        success: function(response)
        {
        $('#table_data').html('');
        $('#table_data').html(response.html);
        
        }
      });
      
      
      
      
  
  
      /**/
      
      
        }
      }
    });
  

setTimeout( function () {


           //$('#StaffList').dataTable();
            $("#StaffList").dataTable({

             "language": {
        "aria": {
            "sortAscending": ": activate to sort column ascending",
            "sortDescending": ": activate to sort column descending"
        },
        "emptyTable": "No data available in table",
        "info": "Showing _START_ to _END_ of _TOTAL_ records",
        "infoEmpty": "No records found",
        "infoFiltered": "(filtered1 from _MAX_ total records)",
        "lengthMenu": "Show _MENU_",
        "search": "",
        "searchPlaceholder": "Search records..",
        "zeroRecords": "No matching records found",
        "paginate": {
            "previous":"Prev",
            "next": "Next",
            "last": "Last",
            "first": "First"
        }
    },


        "pagingType": "bootstrap_extended",
        "order": [[ 0, "desc" ]],
        "lengthMenu": [
            [-1, 40, 60, -1],
            [-1, 40, 60, "All"] // change per page values here
        ],

        "columnDefs": [{
            //"searchable": false,
            //"targets": [0]
        }]

            });
      
    
}, 1000 );


  }else{
    $('#error_div').show();
    $('#error_div').html(errors);
  }
  


});

$(document).on('click','.print_form',function(e){
  var data = $(this).data('walkin');
   var form_id = $(this).data('id');


   print_online(data,form_id);

});

var print_online = function(data,form_id){
     if(data == 'Online'){
    var URL = "http://10.10.10.63/gs/index.php/hcm/career_form_ajax/getPDFNow?career_id="+form_id;
    window.open(URL, '_blank');
   }
}

var getLogs  = function getLogs(id, name, status_id){
    var Form_id = id;
  
  $(".applicant_name_write").text(name)
  $(".showLogs").html('');
  $(".logsArea").show();
  
    App.startPageLoading(); 


    $.ajax({
      type:'POST',
      data:{ '_token': '<?php echo e(csrf_token()); ?>', "Form_id":Form_id },
      url:"<?php echo e(url('/loadLogs')); ?>",
      dataType: "json",
      success: function(response)
      {
        $(".showLogs").html(response.html);
        $("#followupForm_id").val(Form_id)
        $('#followupStatusID').val(status_id)
      }
    });

    setTimeout(function(){
      App.stopPageLoading();
    }, 5000);
    
}

</script>

<script>
 loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/bootbox/bootbox.min.js", function(){   
loadScript("<?php echo e(URL::to('metronic')); ?>/global/scripts/datatable.js", function(){    
  
   loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/datatables/datatables.min.js", function(){

      loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js", function(){
         loadScript("<?php echo e(URL::to('metronic')); ?>/pages/scripts/profile.js", function(){
       
       
               loadScript("<?php echo e(URL::to('metronic')); ?>/pages/scripts/table-datatables-managed.js", function(){
           
           
                   loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/jquery.sparkline.min.js", function(){
                      loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/jqvmap/jqvmap/jquery.vmap.js", function(){
                          loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/moment.js", function(){
                               loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js", function(){
                                   loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/bootstrap-datepaginator/bootstrap-datepaginator.min.js", function(){
                                      // loadScript("<?php echo e(URL::to('metronic')); ?>/pages/scripts/ui-datepaginator.min.js", function(){
                                           loadScript("<?php echo e(URL::to('metronic')); ?>/layouts/layout/scripts/demo.min.js", function(){ 
                                               loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/ion.rangeslider/js/ion.rangeSlider.min.js", function(){
                                                   loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/bootstrap-markdown/lib/markdown.js", function(){
                                                       loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/bootstrap-markdown/js/bootstrap-markdown.js", function(){
                                                           loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/bootstrap-summernote/summernote.min.js", function(){
                                                               loadScript("<?php echo e(URL::to('metronic')); ?>/pages/scripts/components-ion-sliders.js", function(){
                                                    loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/time-range/js/vue.min.js", function(){
                                                loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/select2/js/select2.full.min.js", function(){
                                                loadScript("<?php echo e(URL::to('metronic')); ?>/pages/scripts/components-select2.min.js", function(){
                                                        loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/time-range/js/flatpickr.min.js", function(){

                                                            loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/time-range/js/nouislider.min.js", function(){
                                                               loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/time-range/js/moment.min.js", function(){
                                                                   //loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/time-range/js/index.js", function(){

                                                                    loadScript("<?php echo e(URL::to('metronic')); ?>/global/plugins/jquery-validation/js/jquery.validate.js",function(){
                                                                                    loadScript("<?php echo e(URL::to('')); ?>/js/jquery.filtertable.min.js", function(){
                                                                                        loadScript("<?php echo e(URL::to('metronic')); ?>/global/scripts/app.min.js", pagefunction);
                                                                                    });
                                                                        });
                                                                                });
                                                                            //});
                                                            });
                                                                    });
                                                        });});
                                                    });
                                                });
                                            });
                                                       });
                                                   });
                                               });
                                           });
                                       //});
                                   });
                               });
                           });
                       });
                   });
           
               });
         
         
           });
       });
   });
   });
});
</script>